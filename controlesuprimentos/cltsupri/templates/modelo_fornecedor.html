{% extends 'index.html' %}

{% block content %}
<h5 class="mb-3">
  {% if editando %} Editando Associação {% else %} Associar Modelo a Fornecedor {% endif %}
</h5>

<form method="post" class="mb-4 w-50">
  {% csrf_token %}

  {% if form.non_field_errors %}
    <div class="alert alert-danger">
      {{ form.non_field_errors }}
    </div>
  {% endif %}

  <div class="mb-3">
    {{ form.modelo.label_tag }}
    {{ form.modelo }}
    {% for error in form.modelo.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <div class="mb-3">
    {{ form.fornecedor.label_tag }}
    {{ form.fornecedor }}
    {% for error in form.fornecedor.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <button type="submit" class="btn btn-primary">
    {% if editando %} Salvar Alterações {% else %} Salvar {% endif %}
  </button>
</form>

<hr>

<h5 class="mb-3">Associações Existentes</h5>

{% if associacoes %}
<table class="table table-bordered w-75">
  <thead>
    <tr>
      <th>Modelo</th>
      <th>Fornecedor</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for assoc in associacoes %}
    <tr>
      <td>{{ assoc.modelo }}</td>
      <td>{{ assoc.fornecedor }}</td>
      <td>
        <a href="{% url 'modelo-fornecedor-edit' assoc.id %}" class="btn btn-sm btn-warning">Editar</a>
        <a href="{% url 'modelo-fornecedor-delete' assoc.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Deseja realmente excluir?');">Excluir</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>Nenhuma associação cadastrada.</p>
{% endif %}

{% endblock %}
